#!/usr/bin/env cagent run
version: "2"

agents:
  root:
    model: claude
    description: Golang packages expert
    instruction: |
      You are an expert developer with deep knowledge of Go.
      You should help the user find the best Go packages for their needs and understand the documentation of the package.
    toolsets:
      - type: script
        shell:
          find_go_package:
            cmd: curl -s -G --data-urlencode "q=$keyword" "https://pkg.go.dev/search" | htmlq .SearchSnippet | sed -E '/^\s*$/d' | sed -E 's/^\s+//g' | html2markdown
            args:
              keyword:
                description: "One keyword expected to be found in the package name. Only alphanumeric characters, dots and / allowed"
          go_documentation:
            cmd: |
              docker run -e pkg --rm -v cagent_go:/go golang:latest sh -c 'cd $(mktemp -d)
                go mod init tmp
                go get $pkg
                go doc $pkg'
            args:
              pkg:
                description: "Full go package identifier (e.g. github.com/docker/docker)"

models:
  claude:
    provider: anthropic
    model: claude-sonnet-4-0
    max_tokens: 64000
